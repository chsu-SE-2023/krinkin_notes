#### Модели освещения: диффузное, зеркальное и фоновое
Освещение играет ключевую роль в создании трёхмерных сцен. Модели освещения описывают….

##### Фоновое освещение
Равномерный свет, который освещает все объекты в сцене независимо от их положения относительно источника света. Оно моделирует рассеяный свет, который отражается от окружающих поверхностей и создаёт базовый уровень освещённости.
- Каждый объект в сцене получает одинаковую интенсивность фонового света.
- Фоновое освещение не зависит от направления света или нормалей поверхнеости.
- Формула $Iambient = ka * Ia$
	- $ka$ - коофициент фонового освещения материала
	- $Ia$ - интенсивность фонового света

##### Диффузное освещение
Моделирует свет, который равномерно. Рассеивается по поверхности объекта. Интенсивность диффузного света зависит от угла между направлением света и нормалью поверхности.
- Чем ближе нормаль к направлению света, тем ярче освещена поверхность.
- Используется закон Ламберта: интенсивность света пропорциональна косинусу угла между нормалью и направлением света
- Формула Idiffuse = kd * Ii * max(0, N*L)
	- Kd - коофициент диффузного освещения материала
	- Ii - интенсивность источника света
	- N - нормаль к поверхности
	- L - вектор направления света

##### Зеркальное освещение
Моделирует отражение света от гладких поверхностей, таких как металлы или стекло. Оно создаёт яркие блики на поверхности объекта.
- Интенсивность зеркального света зависит от угла между направлением отражения света и направлением камеры.
- Используется модель Фонга, которая учитывает степень "блеска" поверхности.
- Формула Ispecular = ks * Ii * (max(0, R * V))n
	- Ks - коофициент зеркального отражения материала
	- Ii - интенсивность источника света
	- R - вектор отражения света
	- V - вектор направления камеры
	- N - показатель степени, определяющий "остроту" блика

##### Комбинированная модель освещения
В реальных сценах используются все три типа освещения одновременно. Общая интенсивность света вычисляется как сумма всех компонентов: $Itotal = Iambient + Idiffuse + Ispecular$

#### Алгоритмы затенения
**Затенение** - процесс определения интенсивности света на поверхности объекта.
##### Плоское затенение
- Плоское затенение - простейший метод затенения, при котором вся грань освещается одинаково.
- Интенсивность света вычисляется только для одной точки (обычно цента или нормали).

Алгоритм
1. Вычисляется нормаль к грани
2. На основе нормали и модели освещения вычисляется интенсивность света
3. Вся грань закрашивается одним цветом
##### Затенение Гуро
Метод, при котором интенсивность света вычисляется для вершин полигона, а затем интерполируется по всей грани.

Алгоритм
1. Для каждой вершины полигона вычисляется интенсивность света на основе её нормали.
2. Интенсивность интерполируется линейно между вершинами.
3. Каждый пиксель внутри грани получает значение интенсивности, основанное на интерполяции.
##### Затенение Фонга
Более сложный метод, при котором нормали интерполируются между вершинами, в интенсивность света ….

Алгоритм
1. Для каждой вершины полигона вычисляется нормаль
2. Нормали интерполируются линейно между вершинами
3. Для каждого пикселя вычисляется интенсивность света на основе интерполированной нормали.
Один из самых идеальных методов затенения.

#### Тени и их вычисление
**Тени** - важный элемент визуализации, который добавляет реализм трёхмерным сценам. Они помогают определить положение объектов относительно источников света и друг друга.
##### Зачем тени?
- Реализм
- Глубина - помогают воспринимать глубину сцены и расстояние между объектами
- Интерактивность - улучшение восприятия динамики сцены
##### Принцип работы теней
- Тени создаются, когда объект перекрывает путь света от источника к поверхности. Для вычисления теней необходимо определить, какие части сцены находятся в тени, а какие освещены.
- Определение видимости: проверяется, достигает ли свет каждой точки сцены
- Рендеринг теней: тени рисуются на поверхностях, которые не получают прямой свет

#### Методы вычисления теней
##### Shadow Mapping
Популярный метод, который использует текстуры для хранения информации о глубине сцены с точки зрения источника света.
- Создаётся карта глубины, которая хранит расстояния от источника света до ближайших объектов.
- Для каждого пикселя проверяется, находится ли он дальше, чем значение на карте глубины. Если да, то пиксель находится в тени.
##### Ray tracing
Физически точный метод, который моделирует распространение света в сцене.

Принцип работы
- Испускание лучей - из камеры испускаются лучи через каждый пиксель экрана
- Проверка пересечений - для каждого луча проверяется, пересекает ли он объекты на пути к источнику света. Если да, то пиксель находится в тени.
##### Shadow volumes
Метод, который использует геометрические объёмы для определения области тени.

Принцип работы
- Создание объёмов теней - для каждого источника света создаются объёмы, которые ограничивают области, куда свет не попадает.
- Определение теней - проверяется, находится ли камера внутри объёма тени. Если да, то соответствующие пиксели затеняются.

##### Soft shadows
Мягкие тени имитируют рассеянный свет, создавая плавные переходы между светом и тенью.

Принцип работы
- Используется несколько источников света или размытие границ теней
**Пример** - в реальной жизни тени от солнца могут быть мягкими из-за рассеивания света в атмосфере.

#### Текстурирование и маппинг (UV-развёртки)
**Текстурирование** - процесс накладывания изображений на поверхности трёхмерных объектов для создания детализированных и реалистичных моделей. UV-развёртки играют ключевую роль в этом процессе, так как они определяют, как текстуры проецируются на объекты.

Цель:
- Улучшить визуальное качество объектов без увеличения количества полигонов.
- Добавить цвет, рисунок, шероховатость или другие свойства поверхности.

**UV-развёртка** - процесс разворачивания трёхмерной модели в двухмерное пространство, чтобы определить, как текстура будет накладываться на поверхность объекта.
##### Почему "UV"?
- В трёхмерном пространстве координаты обозначаются как (x, y, z)
- Для текстур используются отдельные координаты (u, v), которые указывают положение пикселей текстуры на поверхности объекта.
##### Принцип работы
- Разворачивание модели - модель "разрезается" и раскладывается на плоскости, как если бы вы развернули картонную коробку
- Назначение текстурных координат - каждой вершине модели присваиваются координаты (u, v), которые указывают на её положение на текстуре
- Проецирование текстуры - текстура интерполируется между вершинами для покрытия всей поверхности
##### Типы текстурного маппинга
1. Diffuse Map
	- Основная текстура, которая определяет цвет поверхности
2. Normal Map
	- Используется для добавления деталей без изменения геометрии
	- Хранит информацию о нормалях поверхности для создания эффекта объёма
3. Specular Map
	- Определяется, какие части поверхности будут блестеть (например, металлические участки)
4. Bump Map
	- Создаёт иллюзию объёма за счёт изменения освещения
5. Displacement Map
	- Физически изменяет геометрию объекта на основе текстуры
##### Преимущества текстурирования
- Экономия ресурсов - детализация достигается без увеличения количества полигонов
- Гибкость - легко изменять внешний вид объекта, меняя текстуры
- Реализм - текстуры добавляют реалистичность и детализацию
##### Недостатки текстурирования
- Сложность создания UV-развёрток - плохо сделанная развёртка может привести к искажениям текстуры
- Ограниченность разрешения - при увеличении объекта текстура может "пикселизироваться"
- Зависимость от качества текстур - низкокачественные текстуры ухудшают визуальный результат.