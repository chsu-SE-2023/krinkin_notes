#### Основы анимации: ключевые кадры и интерполяция

##### Анимация
Последовательность кадров, которые отображаются с определённой частотой, создавая иллюзию движения
##### Ключевые кадры (Keyframes)
Основные точки в анимации, которые задают начальное, конечное и промежуточное состояние объекта.

Принцип работы
- Задание ключевых кадров
- Интерполяция между кадрами
##### Интерполяция
Процесс вычисления промежуточных значений между ключевыми кадрами.

Типы интерполяции:
- Линейная - промежуточные кадры вычисляются по прямой линии $P(t) = P0 + t*(P1 - P0)$ ($P0$ - начальная точка, $P1$ - конечная точка, $t$ - параметр времени)
- Кубическая - промежуточные значения вычисляются при помощи кривых безье и сплайнов, обеспечивает более плавные переходы
- Сферическая интерполяция - используется для интерполяции углов (например для вращения) $Q(t) = {sin((1-t)O) \over sin(0)}*Q0 + {sin(tO) \over sin(O)}*Q1$  , где $Q0$, $Q1$ - кватернионы поворота, $O$ - угол между кватернионами.

##### Этапы создания анимации
- Планирование
- Создание ключевых кадров
- Интерполяция
- Настройка параметров
- Тестирование
##### Скелетная анимация (Skeletal Animation)
Метод, при котором объект (например, персонаж) анимируется с помощью внутреннего "скелета". Скелет состоит из костей (bones), которые связаны между собой иерархически.

Недостатки:
- Сложность настройки: требуется создание скелета и привязка его к модели
- Ограничения: не подходит для объектов без чёткой структуры (например, жидкостей)

##### Морфинг
Метод при котором объект анимируется путём плавного изменения его формы между некоторыми предопределёнными состояниями.
- Принцип работы: создаются несколько моделей, каждая из которых представляет определённое состояние объекта
- Интерполяция между формами: вершины модели интерполируются между базовыми формами для создания плавного перехода

Преимущества:
- Простота реализации: не требует создания скелета
- Высокая детализация: подходит для сложных деформаций (например, мимики)

Недостатки:
- Высокие требования к памяти: каждая форма требует хранения всех вершин модели
- Ограничения: сложно комбинировать несколько анимаций одновременно

#### Физика в графике: законы столкновения, движения, гравитация

##### Основные законы движения:
- Первый закон Ньютона (закон инерции) - объект остаётся в покое или движется равномерно и прямолинейно, если на неё не действуют внешние силы
- Второй закон Ньютона (закон ускорения) - ускорение объекта прямо пропорционально приложенной силе и обратно пропорционально его массе $F = m*a$
- Третий закон Ньютона (закон действия и противодействия) - каждому действию есть равное и противоположно направленное противодействие

Применение:
- Моделирование движения персонажей, транспортных средств и других объектов

##### Столкновения
Это взаимодействия между объектами, которые происходят при их контакте. В компьютерной графике важно правильно обрабатывать столкновения для создания реалистичных сцен.

Типы столкновений
- Упругие столкновения: энергия сохраняется, и объекты отталкиваются друг от друга
- Неупругие столкновения: часть энергии теряется (например, в виде тепла или деформации)

##### Упругие столкновения

$v'1 = {(m1 - m2) * v1 + 2 * m2 * v2 \over m1 + m2}$
$v'2 = {(m2 - m1) * v2 + 2 * m1 * v1 \over m1 + m2}$
где: $v1$, $v2$ - начальные скорости объектов, $v'1$, $v'2$ - конечные скорости объектов, $m1$, $m2$ - массы объектов.
##### Гравитация
%%Камере Глеба стало не очень хорошо, прямо как мне на этой лекции%%
##### Формула гравитации
Сила гравитации между двумя объектами определяется законом всемирного тяготения Ньютона:
$F = G * {m1*m2 \over r^2}$, где $F$ - сила гравитации, $m1$, $m2$ - массы объектов, $r$ - расстояние между объектами, $G$ - гравитационная постоянная

Движение под воздействием гравитации
- Вертикальное движение:
	$y(t) = y0 + v0 * t - {1 \over 2} * g * t^2$, где $y0$ - начальная скорость, $v0$ - начальная скорость, $t$ - время.
- Горизонтальное движение:
	$x(t) = x0 - vx * t$
#### Интеграция физики в графику. Этапы реализации
- Моделирование сил: добавление гравитации, трения, упругости и других сил
- Обновление состояния объектов: вычисление новых положений и скоростей объектов на каждом кадре
- Обработка столкновений: проверка пересечений и корректировка движений объектов
- Визуализация: отображение объектов с учётом их физических свойств

#### Примеры использования физических движков
**Физический движок** - программные библиотеки, которые моделируют физические явления, такие как гравитация, столкновения, трение и другие взаимодействия объектов.
Два популярных физических движка: Bullet и PhysX
##### PhysX
Физический движок, разработанный NVIDIA. Предоставляет инструменты для моделирования сложных физических взаимодействий, таких как: динамика твёрдых тел, текучих сред, тканей и частиц.
- Высокая производительность - PhysX оптимизирован для работы на GPU, что позволяет обрабатывать сложные сцены в реальном времени
- Реализм - поддерживает детализированные физические эффекты, такие как разрушение объектов, текучесть жидкостей и деформация материалов.
- Интеграция с игровыми движками - PhysX поддерживается многими игровыми движками
- Кроссплатформенность
##### Bullet
Открытый физический движок, который широко используется в играх, робототехнике и научных приложениях. Известен своей простотой, эффективностью и бесплатностью.